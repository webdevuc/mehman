"use strict";(self.webpackChunkmehman_booking_engine=self.webpackChunkmehman_booking_engine||[]).push([["default-src_app_auth_models_login_model_ts-src_app_auth_models_reset-password_model_ts-src_ap-4121e0"],{56741:(l,m,o)=>{o.d(m,{W:()=>n});class n{}},3668:(l,m,o)=>{o.d(m,{J:()=>n});class n{}},19459:(l,m,o)=>{o.d(m,{b:()=>n});class n{}},28263:(l,m,o)=>{o.d(m,{b:()=>d,i:()=>v});var n=o(2508),_=o(50253),h=o(68951),x=o(3668),e=o(22560),b=o(54528),p=o(88062),C=o(65863),f=o(94666);const T=["firstNameInput"],Z=["codeInput"];function U(t,r){if(1&t&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.hij(" ",i.errorMsg," ")}}function N(t,r){if(1&t&&(e.TgZ(0,"div",34),e._uU(1),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.hij(" ",i.successMsg," ")}}function F(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"First Name is required."),e.qZA())}function w(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"The First Name must be at max 50 characters long."),e.qZA())}function q(t,r){if(1&t&&(e.TgZ(0,"div",35),e.YNc(1,F,2,0,"div",6),e.YNc(2,w,2,0,"div",6),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.registerForm.get("firstName").errors.required),e.xp6(1),e.Q6J("ngIf",i.registerForm.get("firstName").errors.maxlength)}}function A(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Last Name is required."),e.qZA())}function I(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"The Last Name must be at max 50 characters long."),e.qZA())}function S(t,r){if(1&t&&(e.TgZ(0,"div",35),e.YNc(1,A,2,0,"div",6),e.YNc(2,I,2,0,"div",6),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.registerForm.get("lastName").errors.required),e.xp6(1),e.Q6J("ngIf",i.registerForm.get("lastName").errors.maxlength)}}function E(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Email is required."),e.qZA())}function y(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Enter a valid email."),e.qZA())}function M(t,r){if(1&t&&(e.TgZ(0,"div",35),e.YNc(1,E,2,0,"div",6),e.YNc(2,y,2,0,"div",6),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.registerForm.get("email").errors.required),e.xp6(1),e.Q6J("ngIf",i.registerForm.get("email").errors.email)}}function J(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password is required."),e.qZA())}function P(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password must be at least 8 characters."),e.qZA())}function Q(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password must be at max 25 characters."),e.qZA())}function k(t,r){if(1&t&&(e.TgZ(0,"div",35),e.YNc(1,J,2,0,"div",6),e.YNc(2,P,2,0,"div",6),e.YNc(3,Q,2,0,"div",6),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.registerForm.get("password").errors.required),e.xp6(1),e.Q6J("ngIf",i.registerForm.get("password").errors.minlength),e.xp6(1),e.Q6J("ngIf",i.registerForm.get("password").errors.maxlength)}}function O(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password is required."),e.qZA())}function Y(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Passwords must match."),e.qZA())}function R(t,r){if(1&t&&(e.TgZ(0,"div",35),e.YNc(1,O,2,0,"div",6),e.YNc(2,Y,2,0,"div",6),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.registerForm.get("passwordConfirm").errors.required),e.xp6(1),e.Q6J("ngIf",i.registerForm.get("passwordConfirm").errors.passwordsNotMatching)}}function V(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Phone Number is required."),e.qZA())}function D(t,r){if(1&t&&(e.TgZ(0,"div",35),e.YNc(1,V,2,0,"div",6),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.registerForm.get("phoneNumber").errors.required)}}function L(t,r){1&t&&(e.TgZ(0,"div",35)(1,"div"),e._uU(2,"Please accept terms & conditions."),e.qZA()())}const c=function(t){return{"is-invalid":t}},K=function(){return{standalone:!0}},G=function(){return["/auth/signin"]};function B(t,r){if(1&t){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",7)(2,"h2"),e._uU(3,"Sign Up and Save"),e.qZA(),e.TgZ(4,"p"),e._uU(5,"Create an account now to access member only deals"),e.qZA()(),e.TgZ(6,"div",8)(7,"form",9),e.YNc(8,U,2,1,"div",10),e.YNc(9,N,2,1,"div",11),e.TgZ(10,"label"),e._uU(11,"First Name"),e.qZA(),e._UZ(12,"input",12,13),e.YNc(14,q,3,2,"div",14),e.TgZ(15,"label"),e._uU(16,"Last Name"),e.qZA(),e._UZ(17,"input",15),e.YNc(18,S,3,2,"div",14),e.TgZ(19,"label"),e._uU(20,"Email"),e.qZA(),e._UZ(21,"input",16,17),e.YNc(23,M,3,2,"div",14),e.TgZ(24,"label"),e._uU(25,"Password"),e.qZA(),e._UZ(26,"input",18),e.YNc(27,k,4,3,"div",14),e.TgZ(28,"label"),e._uU(29,"Confirm Password"),e.qZA(),e._UZ(30,"input",19),e.YNc(31,R,3,2,"div",14),e.TgZ(32,"label"),e._uU(33,"Phone Number"),e.qZA(),e._UZ(34,"input",20,13),e.YNc(36,D,2,1,"div",14),e.TgZ(37,"div",21)(38,"div",22)(39,"div",23)(40,"input",24),e.NdJ("ngModelChange",function(a){e.CHM(i);const u=e.oxw();return e.KtG(u.isAcceptedTermsAndConditions=a)}),e.qZA(),e._UZ(41,"label",25),e.qZA()(),e.TgZ(42,"div",26)(43,"p"),e._uU(44,"I understand and agree with the Fare Rules , the Visa Rules , the Privacy Policy , the User Agreement and Terms of Service of "),e.TgZ(45,"a",27),e._uU(46," Mehman.pk"),e.qZA()()()(),e.YNc(47,L,3,0,"div",14),e.TgZ(48,"button",28),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.register())}),e._uU(49," Sign Up "),e.qZA()()(),e.TgZ(50,"div",29)(51,"div",30)(52,"h5"),e._uU(53,"Alreay have an account?"),e.qZA()(),e.TgZ(54,"div",31)(55,"a",32),e._uU(56,"Sign In"),e.qZA()()(),e.BQk()}if(2&t){const i=e.oxw();e.xp6(7),e.Q6J("formGroup",i.registerForm),e.xp6(1),e.Q6J("ngIf",i.isError),e.xp6(1),e.Q6J("ngIf",i.isSuccess),e.xp6(3),e.Q6J("ngClass",e.VKq(20,c,(i.submitted||i.registerForm.get("firstName").touched)&&i.registerForm.get("firstName").errors)),e.xp6(2),e.Q6J("ngIf",i.registerForm.get("firstName").errors&&(i.submitted||i.registerForm.get("firstName").touched)),e.xp6(3),e.Q6J("ngClass",e.VKq(22,c,(i.submitted||i.registerForm.get("lastName").touched)&&i.registerForm.get("lastName").errors)),e.xp6(1),e.Q6J("ngIf",i.registerForm.get("lastName").errors&&(i.submitted||i.registerForm.get("lastName").touched)),e.xp6(3),e.Q6J("ngClass",e.VKq(24,c,(i.submitted||i.registerForm.get("email").touched)&&i.registerForm.get("email").errors)),e.xp6(2),e.Q6J("ngIf",i.registerForm.get("email").errors&&(i.submitted||i.registerForm.get("email").touched)),e.xp6(3),e.Q6J("ngClass",e.VKq(26,c,(i.submitted||i.registerForm.get("password").touched)&&i.registerForm.get("password").errors)),e.xp6(1),e.Q6J("ngIf",i.registerForm.get("password").errors&&(i.submitted||i.registerForm.get("password").touched)),e.xp6(3),e.Q6J("ngClass",e.VKq(28,c,(i.submitted||i.registerForm.get("passwordConfirm").touched)&&i.registerForm.get("passwordConfirm").errors)),e.xp6(1),e.Q6J("ngIf",i.registerForm.get("passwordConfirm").errors&&(i.submitted||i.registerForm.get("passwordConfirm").touched)),e.xp6(3),e.Q6J("ngClass",e.VKq(30,c,(i.submitted||i.registerForm.get("phoneNumber").touched)&&i.registerForm.get("phoneNumber").errors)),e.xp6(2),e.Q6J("ngIf",i.registerForm.get("phoneNumber").errors&&(i.submitted||i.registerForm.get("phoneNumber").touched)),e.xp6(4),e.Q6J("ngModel",i.isAcceptedTermsAndConditions)("ngModelOptions",e.DdM(32,K)),e.xp6(7),e.Q6J("ngIf",i.submitted&&!i.isAcceptedTermsAndConditions),e.xp6(1),e.Q6J("disabled",(i.registerForm.invalid||!i.isAcceptedTermsAndConditions)&&i.submitted),e.xp6(7),e.Q6J("routerLink",e.DdM(33,G))}}function W(t,r){if(1&t&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.hij(" ",i.errorMsg," ")}}function j(t,r){if(1&t&&(e.TgZ(0,"div",34),e._uU(1),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.hij(" ",i.successMsg," ")}}function H(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Email is required."),e.qZA())}function z(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Enter a valid email."),e.qZA())}function X(t,r){if(1&t&&(e.TgZ(0,"div",35),e.YNc(1,H,2,0,"div",6),e.YNc(2,z,2,0,"div",6),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.verificationForm.get("email").errors.required),e.xp6(1),e.Q6J("ngIf",i.verificationForm.get("email").errors.email)}}function $(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"OTP (from Mail) is required."),e.qZA())}function ee(t,r){if(1&t&&(e.TgZ(0,"div",35),e.YNc(1,$,2,0,"div",6),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.verificationForm.get("code").errors.required)}}function ie(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(i);const a=e.oxw(2);return e.KtG(a.register(!0))}),e._uU(1," Resend OTP "),e.qZA()}}function te(t,r){if(1&t){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",7)(2,"h2"),e._uU(3,"Verify OTP"),e.qZA(),e.TgZ(4,"p"),e._uU(5,"Confirm your registered email address"),e.qZA()(),e.TgZ(6,"div",8)(7,"form",9),e.YNc(8,W,2,1,"div",10),e.YNc(9,j,2,1,"div",11),e.TgZ(10,"label"),e._uU(11,"Email"),e.qZA(),e._UZ(12,"input",16),e.YNc(13,X,3,2,"div",14),e.TgZ(14,"label"),e._uU(15,"OTP (check your mail)"),e.qZA(),e._UZ(16,"input",36,37),e.YNc(18,ee,2,1,"div",14),e.TgZ(19,"button",38),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.verifyCode())}),e._uU(20," Verify OTP "),e.qZA(),e.YNc(21,ie,2,0,"button",39),e.qZA()(),e.BQk()}if(2&t){const i=e.oxw();e.xp6(7),e.Q6J("formGroup",i.verificationForm),e.xp6(1),e.Q6J("ngIf",i.isError),e.xp6(1),e.Q6J("ngIf",i.isSuccess),e.xp6(3),e.Q6J("ngClass",e.VKq(9,c,(i.verifySubmitted||i.verificationForm.get("email").touched)&&i.verificationForm.get("email").errors)),e.xp6(1),e.Q6J("ngIf",i.verificationForm.get("email").errors&&(i.verifySubmitted||i.verificationForm.get("email").touched)),e.xp6(3),e.Q6J("ngClass",e.VKq(11,c,(i.verifySubmitted||i.verificationForm.get("code").touched)&&i.verificationForm.get("code").errors)),e.xp6(2),e.Q6J("ngIf",i.verificationForm.get("code").errors&&(i.verifySubmitted||i.verificationForm.get("code").touched)),e.xp6(1),e.Q6J("disabled",i.verificationForm.invalid&&i.verifySubmitted),e.xp6(2),e.Q6J("ngIf",i.isResendOtp)}}class d{constructor(r,i,s,a){this.formBuilder=r,this.authService=i,this.router=s,this.toasterService=a,this.unsubscribeAll=new _.x}ngOnInit(){window.scrollTo(0,0),this.clear(),this.firstName="",this.lastName="",this.email="",this.password="",this.phoneNumber="",this.code="",this.isVerification=!1,this.isResendOtp=!1,this.submitted=!1,this.verifySubmitted=!1,this.isAcceptedTermsAndConditions=!1,this.authService.sendIsPasswordResetSuccessfully(!1),this.registerForm=this.formBuilder.group({firstName:["",[n.kI.required,n.kI.maxLength(50)]],lastName:["",[n.kI.required,n.kI.maxLength(50)]],email:["",[n.kI.required,n.kI.email]],password:["",[n.kI.required,n.kI.minLength(8),n.kI.maxLength(25)]],passwordConfirm:["",[n.kI.required,v]],phoneNumber:["",n.kI.required]}),this.verificationForm=this.formBuilder.group({email:["",[n.kI.required,n.kI.email]],code:["",[n.kI.required]]}),this.registerForm.get("password").valueChanges.pipe((0,h.R)(this.unsubscribeAll)).subscribe(()=>{this.registerForm.get("passwordConfirm").updateValueAndValidity()})}register(r=!1){if(this.clear(),this.submitted=!0,this.registerForm.invalid)return;!1===r?(this.isVerification=!1,this.isResendOtp=!1):setTimeout(()=>{this.formGroupDirective.resetForm(),this.verificationForm.patchValue({email:this.email}),this.verificationForm.get("email").disable()},0);const i=new x.J,s=this.registerForm.controls.firstName.value;i.firstName=s.trim();const a=this.registerForm.controls.lastName.value;i.lastName=a.trim();const u=this.registerForm.controls.email.value;i.email=u.trim();const re=this.registerForm.controls.password.value;i.password=re.trim();const ne=this.registerForm.controls.phoneNumber.value;i.phoneNumber=ne.trim(),i.isResend=r,this.firstName=i.firstName,this.lastName=i.lastName,this.email=i.email,this.password=i.password,this.phoneNumber=i.phoneNumber,this.authService.register(i).subscribe(g=>{g?"success"===g.status?(this.verificationForm.patchValue({email:this.email}),this.verificationForm.get("email").disable(),this.isSuccess=!0,this.successMsg="OTP is sent to your registered email.",this.isVerification=!0,this.isResendOtp=!1):null!=g.message&&void 0!==g.message&&""!==g.message?(this.toasterService.showError(g.message,"Error"),this.clearRegister()):(this.toasterService.showError("Register Unknown Error 1, try again","Error"),this.clearRegister()):(this.toasterService.showError("Register Unknown Error 2, try again","Error"),this.clearRegister())})}verifyCode(){this.clear(),this.verifySubmitted=!0,!this.verificationForm.invalid&&(this.isResendOtp=!1,this.code=this.verificationForm.controls.code.value,this.code=this.code.trim(),this.authService.verifyEmailConfirmCode(this.code,this.email).subscribe(r=>{if(r)if("success"===r.status){const i=r.data;!0===i.iec?(this.authService.setUserLoggedIn(i.u,i.token,i.fn,i.ln,i.r,i.bl,i.pn,i.Opbl,i.aguserid,i.credLi,i.agid),this.router.navigate(["/user/bookings"])):this.toasterService.showError("VerifyCode Unknown Error 1, try again","Error")}else r.message&&null!=r.message&&""!==r.message?(this.isError=!0,this.errorMsg=r.message,this.clearVerifyCode()):(this.toasterService.showError("VerifyCode Unknown Error 2, try again","Error"),this.clearVerifyCode());else this.toasterService.showError("VerifyCode Unknown Error 3, try again","Error"),this.clearVerifyCode()}))}clear(){this.isError=!1,this.errorMsg="",this.isSuccess=!1,this.successMsg=""}clearRegister(){setTimeout(()=>this.formGroupDirective.resetForm(),0),this.firstNameInput.nativeElement.focus()}clearVerifyCode(){setTimeout(()=>{this.formGroupDirective.resetForm(),this.verificationForm.patchValue({email:this.email}),this.verificationForm.get("email").disable(),this.isResendOtp=!0},0),this.codeInput.nativeElement.focus()}ngOnDestroy(){this.unsubscribeAll.next(0),this.unsubscribeAll.complete()}}d.\u0275fac=function(r){return new(r||d)(e.Y36(n.qu),e.Y36(b.e),e.Y36(p.F0),e.Y36(C.M))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-sign-up"]],viewQuery:function(r,i){if(1&r&&(e.Gf(T,5),e.Gf(n.sg,5),e.Gf(Z,5)),2&r){let s;e.iGM(s=e.CRH())&&(i.firstNameInput=s.first),e.iGM(s=e.CRH())&&(i.formGroupDirective=s.first),e.iGM(s=e.CRH())&&(i.codeInput=s.first)}},decls:8,vars:2,consts:[[1,"hero-signup"],[1,"container"],[1,"row"],[1,"col-lg-12","col-sm-12","col-xs-12"],[1,"signup-boxes"],[1,"signup-box"],[4,"ngIf"],[1,"signup-title"],[1,"signup-form"],[3,"formGroup"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["type","text","placeholder","First Name","formControlName","firstName","required","",1,"sign-input",3,"ngClass"],["firstNameInput",""],["class","invalid-feedback",4,"ngIf"],["type","text","placeholder","Last Name","formControlName","lastName","required","",1,"sign-input",3,"ngClass"],["type","text","placeholder","Email","formControlName","email","required","",1,"sign-input",3,"ngClass"],["emailInput",""],["type","password","placeholder","Password","formControlName","password","required","",1,"sign-input",3,"ngClass"],["type","password","placeholder","Confirm Password","formControlName","passwordConfirm","required","",1,"sign-input",3,"ngClass"],["type","text","placeholder","Phone Number","formControlName","phoneNumber","required","",1,"sign-input",3,"ngClass"],[1,"agree-box"],[1,"agree-icon"],[1,"tool-check","fliht-check"],["type","checkbox","id","agree",1,"tool-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","agree"],[1,"agree-cont"],["href","javascript:void(0);"],["type","submit",1,"custom-sign-btn","btn",3,"disabled","click"],[1,"have-account"],[1,"account-cont"],[1,"have-btn"],[3,"routerLink"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"invalid-feedback"],["type","text","placeholder","OTP (check your mail)","formControlName","code","required","",1,"sign-input",3,"ngClass"],["codeInput",""],["type","submit",1,"custom-sign-btn","btn","mt-4",3,"disabled","click"],["type","submit","class","custom-sign-btn btn mt-3",3,"click",4,"ngIf"],["type","submit",1,"custom-sign-btn","btn","mt-3",3,"click"]],template:function(r,i){1&r&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.YNc(6,B,57,34,"ng-container",6),e.YNc(7,te,22,13,"ng-container",6),e.qZA()()()()()()),2&r&&(e.xp6(6),e.Q6J("ngIf",!i.isVerification),e.xp6(1),e.Q6J("ngIf",i.isVerification))},dependencies:[f.mk,f.O5,n._Y,n.Fj,n.Wl,n.JJ,n.JL,n.Q7,n.On,n.sg,n.u,p.yS],styles:[".signup-boxes[_ngcontent-%COMP%]{min-height:960px!important}.required[_ngcontent-%COMP%]{color:red}.is-invalid[_ngcontent-%COMP%]{border:solid 1px red}.invalid-feedback[_ngcontent-%COMP%]{display:inherit!important;margin-bottom:10px}.sign-input[_ngcontent-%COMP%]{margin-bottom:10px}.custom-sign-btn[_ngcontent-%COMP%]{position:relative!important;display:block!important;width:100%;color:#fff;border:1px solid #57b957;background-color:#57b957!important;box-shadow:0 5px 10px #57b95780;font-size:16px!important;text-align:center!important;text-decoration:none!important;font-family:SFUIDisplay-Bold!important;letter-spacing:.5px!important;padding:8px 0!important;border-radius:8px!important;transition:.5s all ease!important}.custom-sign-btn[_ngcontent-%COMP%]:hover{background-color:transparent!important;color:#57b957!important;transition:.5s all ease!important}"]});const v=t=>{if(!t.parent||!t)return null;const r=t.parent.get("password"),i=t.parent.get("passwordConfirm");return r&&i&&""!==i.value&&r.value!==i.value?{passwordsNotMatching:!0}:null}}}]);
//# sourceMappingURL=default-src_app_auth_models_login_model_ts-src_app_auth_models_reset-password_model_ts-src_ap-4121e0.js.map